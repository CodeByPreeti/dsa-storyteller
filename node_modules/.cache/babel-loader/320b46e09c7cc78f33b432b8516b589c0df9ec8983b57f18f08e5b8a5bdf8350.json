{"ast":null,"code":"// ============================================\n//  GEN AI SERVICE - Powered by Hugging Face Free Models\n// ============================================\n// This service uses FREE Hugging Face Inference API\n// No API key required! Just works out of the box!\n// Models used: GPT-2, TinyLlama (all free & fast)\n// ============================================\n\nclass HuggingFaceService {\n  constructor() {\n    this.baseURL = 'https://api-inference.huggingface.co/models';\n    this.maxRetries = 2;\n    this.timeout = 25000;\n  }\n  getModels() {\n    return {\n      primary: 'gpt2',\n      backup: 'TinyLlama/TinyLlama-1.1B-Chat-v1.0'\n    };\n  }\n  async generateStory(topic, preferences = {}) {\n    const models = this.getModels();\n    let model = models.primary;\n    for (let attempt = 1; attempt <= this.maxRetries; attempt++) {\n      try {\n        const prompt = this.createPrompt(topic, preferences);\n        const response = await this.callAPI(model, prompt);\n        if (response && response.length > 100) {\n          const code = this.getCodeTemplate(topic);\n          return {\n            story: response,\n            code,\n            topic,\n            generatedBy: 'Gen AI',\n            model,\n            timestamp: Date.now()\n          };\n        }\n      } catch (error) {\n        console.log(`Attempt ${attempt} failed, trying backup...`);\n        model = models.backup;\n      }\n    }\n    return this.getFallbackStory(topic, preferences);\n  }\n  createPrompt(topic, preferences) {\n    const {\n      level = 'beginner',\n      theme = 'adventure'\n    } = preferences;\n    return `Write an educational story about ${topic} in computer science. Theme: ${theme}. Level: ${level}. Make it engaging and teach the concept clearly in 200-300 words.\\n\\nStory: `;\n  }\n  async callAPI(model, prompt) {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n    try {\n      var _result$, _story;\n      const response = await fetch(`${this.baseURL}/${model}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          inputs: prompt,\n          parameters: {\n            max_new_tokens: 300,\n            temperature: 0.8,\n            top_p: 0.9,\n            do_sample: true\n          }\n        }),\n        signal: controller.signal\n      });\n      clearTimeout(timeoutId);\n      if (!response.ok) throw new Error('API error');\n      const result = await response.json();\n      let story = Array.isArray(result) ? (_result$ = result[0]) === null || _result$ === void 0 ? void 0 : _result$.generated_text : result.generated_text;\n      story = (_story = story) === null || _story === void 0 ? void 0 : _story.replace(prompt, '').trim();\n      return story;\n    } catch (error) {\n      clearTimeout(timeoutId);\n      throw error;\n    }\n  }\n  getCodeTemplate(topic) {\n    const templates = {\n      arrays: `const array = [];\\narray.push(5);\\narray[0] = 10;\\narray.pop();`,\n      stacks: `class Stack {\\n  constructor() { this.items = []; }\\n  push(x) { this.items.push(x); }\\n  pop() { return this.items.pop(); }\\n}`,\n      queues: `class Queue {\\n  constructor() { this.items = []; }\\n  enqueue(x) { this.items.push(x); }\\n  dequeue() { return this.items.shift(); }\\n}`\n    };\n    return templates[topic] || templates.arrays;\n  }\n  getFallbackStory(topic, preferences) {\n    return {\n      story: `Once upon a time, there was a ${topic} that needed to be understood...`,\n      code: this.getCodeTemplate(topic),\n      topic,\n      generatedBy: 'Fallback',\n      model: 'built-in',\n      timestamp: Date.now()\n    };\n  }\n}\nconst huggingFaceService = new HuggingFaceService();\nexport default huggingFaceService;","map":{"version":3,"names":["HuggingFaceService","constructor","baseURL","maxRetries","timeout","getModels","primary","backup","generateStory","topic","preferences","models","model","attempt","prompt","createPrompt","response","callAPI","length","code","getCodeTemplate","story","generatedBy","timestamp","Date","now","error","console","log","getFallbackStory","level","theme","controller","AbortController","timeoutId","setTimeout","abort","_result$","_story","fetch","method","headers","body","JSON","stringify","inputs","parameters","max_new_tokens","temperature","top_p","do_sample","signal","clearTimeout","ok","Error","result","json","Array","isArray","generated_text","replace","trim","templates","arrays","stacks","queues","huggingFaceService"],"sources":["/Users/preetiyadav/Desktop/Minor-Project-7th-Sem/src/services/huggingFaceService.js"],"sourcesContent":["// ============================================\n//  GEN AI SERVICE - Powered by Hugging Face Free Models\n// ============================================\n// This service uses FREE Hugging Face Inference API\n// No API key required! Just works out of the box!\n// Models used: GPT-2, TinyLlama (all free & fast)\n// ============================================\n\nclass HuggingFaceService {\n  constructor() {\n    this.baseURL = 'https://api-inference.huggingface.co/models';\n    this.maxRetries = 2;\n    this.timeout = 25000;\n  }\n\n  getModels() {\n    return {\n      primary: 'gpt2',\n      backup: 'TinyLlama/TinyLlama-1.1B-Chat-v1.0'\n    };\n  }\n\n  async generateStory(topic, preferences = {}) {\n    const models = this.getModels();\n    let model = models.primary;\n    \n    for (let attempt = 1; attempt <= this.maxRetries; attempt++) {\n      try {\n        const prompt = this.createPrompt(topic, preferences);\n        const response = await this.callAPI(model, prompt);\n        \n        if (response && response.length > 100) {\n          const code = this.getCodeTemplate(topic);\n          return {\n            story: response,\n            code,\n            topic,\n            generatedBy: 'Gen AI',\n            model,\n            timestamp: Date.now()\n          };\n        }\n      } catch (error) {\n        console.log(`Attempt ${attempt} failed, trying backup...`);\n        model = models.backup;\n      }\n    }\n    \n    return this.getFallbackStory(topic, preferences);\n  }\n\n  createPrompt(topic, preferences) {\n    const { level = 'beginner', theme = 'adventure' } = preferences;\n    return `Write an educational story about ${topic} in computer science. Theme: ${theme}. Level: ${level}. Make it engaging and teach the concept clearly in 200-300 words.\\n\\nStory: `;\n  }\n\n  async callAPI(model, prompt) {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n\n    try {\n      const response = await fetch(`${this.baseURL}/${model}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          inputs: prompt,\n          parameters: {\n            max_new_tokens: 300,\n            temperature: 0.8,\n            top_p: 0.9,\n            do_sample: true\n          }\n        }),\n        signal: controller.signal\n      });\n\n      clearTimeout(timeoutId);\n      if (!response.ok) throw new Error('API error');\n\n      const result = await response.json();\n      let story = Array.isArray(result) ? result[0]?.generated_text : result.generated_text;\n      story = story?.replace(prompt, '').trim();\n      \n      return story;\n    } catch (error) {\n      clearTimeout(timeoutId);\n      throw error;\n    }\n  }\n\n  getCodeTemplate(topic) {\n    const templates = {\n      arrays: `const array = [];\\narray.push(5);\\narray[0] = 10;\\narray.pop();`,\n      stacks: `class Stack {\\n  constructor() { this.items = []; }\\n  push(x) { this.items.push(x); }\\n  pop() { return this.items.pop(); }\\n}`,\n      queues: `class Queue {\\n  constructor() { this.items = []; }\\n  enqueue(x) { this.items.push(x); }\\n  dequeue() { return this.items.shift(); }\\n}`\n    };\n    return templates[topic] || templates.arrays;\n  }\n\n  getFallbackStory(topic, preferences) {\n    return {\n      story: `Once upon a time, there was a ${topic} that needed to be understood...`,\n      code: this.getCodeTemplate(topic),\n      topic,\n      generatedBy: 'Fallback',\n      model: 'built-in',\n      timestamp: Date.now()\n    };\n  }\n}\n\nconst huggingFaceService = new HuggingFaceService();\nexport default huggingFaceService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}